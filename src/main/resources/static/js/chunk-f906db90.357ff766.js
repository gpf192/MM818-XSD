(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f906db90"],{"0c8c":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emp-sort"},[t._m(0),i("div",{staticClass:"search-wrapper"},[i("div",{staticClass:"search-content",on:{click:t.queryEmpByName}},[i("img",{attrs:{src:s("bbc5")}}),i("span",{staticClass:"search-text"},[t._v("直接搜索选手姓名进行投票")])])]),i("mt-navbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("mt-tab-item",{attrs:{id:"1"},nativeOn:{click:function(e){t.wzPageNumber=0,t.empTicketWZList=[],t.getEmpList()}}},[t._v("王者赛区")]),i("mt-tab-item",{attrs:{id:"2"},nativeOn:{click:function(e){t.qtPageNumber=0,t.empTicketXXList=[],t.getYoungStar()}}},[t._v("新秀赛区")])],1),i("mt-tab-container",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("mt-tab-container-item",{attrs:{id:"1"}},[i("div",[i("EmpSortList",{attrs:{list:t.empTicketWZList},on:{voteEvent:t.userVoteEmpTicket}})],1)]),i("mt-tab-container-item",{attrs:{id:"2"}},[i("div",[i("EmpSortList",{attrs:{list:t.empTicketXXList},on:{voteEvent:t.userVoteEmpTicket}})],1)])],1),i("mt-popup",{attrs:{"popup-transition":"popup-fade",closeOnClickModal:"false"},model:{value:t.votePopupVisible,callback:function(e){t.votePopupVisible=e},expression:"votePopupVisible"}},[i("div",{staticClass:"prompt-form"},[i("img",{staticClass:"close",attrs:{src:s("cd5c")},on:{click:t.closePopup}}),i("div",{staticClass:"top"},[i("img",{attrs:{src:s("aac2")}})]),i("div",{staticClass:"content"},[i("span",{staticClass:"red",on:{click:t.reduce}},[t._v("-")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.myVoteTicket,expression:"myVoteTicket"}],attrs:{type:"number",placeholder:"请输入投票数量"},domProps:{value:t.myVoteTicket},on:{input:function(e){e.target.composing||(t.myVoteTicket=e.target.value)}}}),i("span",{staticClass:"red",on:{click:t.add}},[t._v("+")])]),i("div",{staticClass:"tip"},[t._v("\n        当前剩余可投票数: "+t._s(t.ticketNumber)+"\n      ")]),i("div",{staticClass:"btn-wrapper"},[i("span",{staticClass:"btn-vote",on:{click:t.userVoteEmpBtn}},[t._v("\n          确认投票\n        ")])])])]),t.more?i("div",{staticClass:"lcj-more",on:{click:t.loadBottom}},[i("span",[t._v("查看更多")])]):t._e(),t.allLoaded?i("div",{staticClass:"no-more"},[i("span",[t._v("已加载完")])]):t._e()],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticClass:"img-responsive",attrs:{src:s("3ccb")}})])}],n=(s("ceaa"),s("b2fb")),o=s.n(n),c=(s("386d"),s("5fc6"),s("5af2")),r=s.n(c),l=s("85f2"),m=s.n(l);function p(t,e,s){return e in t?m()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empSortList"},[i("div",{staticClass:"ranking-wrapper"},[t.list[1]?i("div",{staticClass:"ranking-2 ranking"},[i("img",{staticClass:"img-responsive",attrs:{src:s("23d6")}}),i("span",{staticClass:"no"},[t._v(t._s(t.list[1].number)+"票")]),i("span",{staticClass:"emp-name"},[t._v(t._s(t.list[1].empEntity.empName))]),i("span",{staticClass:"name"},[t._v(t._s(t.list[1].empEntity.departmentEntity.name))]),i("span",{staticClass:"vote",on:{click:function(e){return t.userVoteEmp(t.list[1])}}},[t._v("投票")])]):t._e(),t.list[0]?i("div",{staticClass:"ranking-1 ranking"},[i("img",{staticClass:"img-responsive",attrs:{src:s("7ad3")}}),i("span",{staticClass:"no"},[t._v(t._s(t.list[0].number)+"票")]),i("span",{staticClass:"emp-name"},[t._v(t._s(t.list[0].empEntity.empName))]),i("span",{staticClass:"name"},[t._v(t._s(t.list[0].empEntity.departmentEntity.name))]),i("span",{staticClass:"vote",on:{click:function(e){return t.userVoteEmp(t.list[0])}}},[t._v("投票")])]):t._e(),t.list[2]?i("div",{staticClass:"ranking-3 ranking"},[i("img",{staticClass:"img-responsive",attrs:{src:s("59a8")}}),i("span",{staticClass:"no"},[t._v(t._s(t.list[2].number)+"票")]),i("span",{staticClass:"emp-name"},[t._v(t._s(t.list[2].empEntity.empName))]),i("span",{staticClass:"name"},[t._v(t._s(t.list[2].empEntity.departmentEntity.name))]),i("span",{staticClass:"vote",on:{click:function(e){return t.userVoteEmp(t.list[2])}}},[t._v("投票")])]):t._e()]),t._l(t.computeList,function(e,s){return i("div",{key:s,staticClass:"list-item"},[i("span",{staticClass:"index"},[t._v(t._s(s+4))]),i("div",{staticClass:"text-wrapper"},[i("div",{staticClass:"emp-name"},[t._v(t._s(e.empEntity.empName))]),i("div",{staticClass:"name"},[t._v(t._s(e.empEntity.departmentEntity.name))])]),i("span",{staticClass:"no"},[t._v(t._s(e.number)+"票")]),i("span",{staticClass:"vote",on:{click:function(s){return t.userVoteEmp(e)}}},[t._v("投票")])])})],2)},f=[],v={name:"EmpSortList",props:{list:Array},data:function(){return{allLoaded:!1}},computed:{computeList:function(){var t=[];return this.list&&this.list.length>3&&(t=this.list.slice(3)),t}},created:function(){},methods:{userVoteEmp:function(t){console.log("emp"),console.log(t),this.$emit("voteEvent",t)},loadBottom:function(){console.log("loadBottom")}}},g=v,h=(s("3764"),s("2877")),k=Object(h["a"])(g,d,f,!1,null,"1f2b2fde",null),b=k.exports,C=s("ef75"),L=s("59ce"),y=s("2953"),T=(u={name:"EmpSort",components:{EmpSortList:b},data:function(){return p({search:"",empEntity:{},empTicketWZList:[],empTicketXXList:[],selected:"1",wzPageNumber:0,qtPageNumber:0,allLoaded:!1,votePopupVisible:!1,myVoteTicket:0,more:!1},"allLoaded",!1)},computed:{userInfo:function(){return this.$store.state.user}},created:function(){var t={back:!0,romoveMarginTop:!1,title:"服务之星排行榜"};this.$emit("routerChange",t),this.getEmpList()}},p(u,"computed",{userInfo:function(){return this.$store.state.user},ticketNumber:function(){return this.$store.state.ticketNumber}}),p(u,"methods",{add:function(){""!=this.myVoteTicket&&" "!=this.myVoteTicket||(this.myVoteTicket=0),this.myVoteTicket=parseInt(this.myVoteTicket),this.myVoteTicket+=1},reduce:function(){this.myVoteTicket<=0||(this.myVoteTicket=parseInt(this.myVoteTicket),this.myVoteTicket-=1)},userVoteEmpBtn:function(){console.log("userVoteEmpBtn"),console.log(this.empEntity),this.myVoteTicket<1?r()({message:"1票起投",position:"middle",duration:2e3}):this.myVoteTicket>this.ticketNumber?r()({message:"超过最大票数",position:"middle",duration:2e3}):(this.userVoteEmp(this.empEntity.empId,this.myVoteTicket),this.votePopupVisible=!1)},queryEmpByName:function(){console.log(this.search),this.$router.push("/search")},getTicketNumber:function(){var t=this;Object(L["a"])().then(function(e){t.$store.commit({type:"setTicketNumber",ticketNumber:e.data.result.number})})},getEmpList:function(){var t=this,e={pageNumber:this.wzPageNumber,pageSize:10,divison:1};this.allLoaded=!1,this.more=!1,o.a.open({text:"加载中...",spinnerType:"triple-bounce"}),Object(C["a"])(e).then(function(e){o.a.close(),0==e.data.resCode?(console.log(e),t.empTicketWZList=t.empTicketWZList.concat(e.data.result),t.empTicketWZList.length>=e.data.pagination.totalItems?(t.allLoaded=!0,t.more=!1):(t.allLoaded=!1,t.more=!0)):r()({message:e.data.resMsg,position:"middle",duration:3e3})})},getYoungStar:function(){var t=this;console.log("getYoungStar");var e={pageNumber:this.qtPageNumber,pageSize:10,divison:0};this.allLoaded=!1,this.more=!1,o.a.open({text:"加载中...",spinnerType:"triple-bounce"}),Object(C["a"])(e).then(function(e){o.a.close(),0==e.data.resCode?(console.log(e),t.empTicketXXList=t.empTicketXXList.concat(e.data.result),t.empTicketXXList.length>=e.data.pagination.totalItems?(t.allLoaded=!0,t.more=!1):(t.allLoaded=!1,t.more=!0)):r()({message:e.data.resMsg,position:"middle",duration:3e3})})},hasLogin:function(){return this.userInfo.clientId.length>1},userVoteEmp:function(t,e){var s=this,i={empId:t,ticketNumber:e};Object(L["c"])(i).then(function(t){0==t.data.resCode?(s.getTicketNumber(),"1"==s.selected?(s.wzPageNumber=0,s.empTicketWZList=[],s.getEmpList()):(s.qtPageNumber=0,s.empTicketXXList=[],s.getYoungStar()),r()({message:"投票成功",position:"middle",duration:3e3})):r()({message:t.data.resMsg,position:"middle",duration:3e3})})},userVoteEmpTicket:function(t,e){console.log(t);this.hasLogin()?(this.empEntity=t.empEntity,this.votePopupVisible=!0):this.forwardLogin()},forwardLogin:function(){var t=this;window.loginCallBack=function(){console.log("loginCallBack"),t.$store.dispatch("userLogin")},y["a"].forwardLogin("loginCallBack")},loadBottom:function(){console.log("loadBottom"),"1"==this.selected?(console.log("selected: "+this.selected),this.wzPageNumber+=1,this.getEmpList()):(console.log("selected: "+this.selected),this.qtPageNumber+=1,this.getYoungStar())},closePopup:function(){this.votePopupVisible=!1}}),u),A=T,E=(s("fb83"),Object(h["a"])(A,i,a,!1,null,null,null));e["default"]=E.exports},"23d6":function(t,e,s){t.exports=s.p+"img/ranking2.8206d94e.png"},"2fd9":function(t,e,s){},3764:function(t,e,s){"use strict";var i=s("da73"),a=s.n(i);a.a},"3ccb":function(t,e,s){t.exports=s.p+"img/empSortTop.51df2748.png"},"59a8":function(t,e,s){t.exports=s.p+"img/ranking3.e11bbb15.png"},"7ad3":function(t,e,s){t.exports=s.p+"img/ranking1.64ccf50a.png"},aac2:function(t,e,s){t.exports=s.p+"img/voteHand.e7686a13.png"},bbc5:function(t,e){t.exports="data:image/png;base64,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"},da73:function(t,e,s){},ef75:function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return n});var i=s("66df"),a=function(t){return i["a"].request({url:"/activity/emp/list",method:"get",params:t})},n=function(t){return i["a"].request({url:"/activity/emp/query",method:"get",params:t})}},fb83:function(t,e,s){"use strict";var i=s("2fd9"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-f906db90.357ff766.js.map